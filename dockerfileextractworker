FROM python:3.9

RUN pip install poetry
WORKDIR /app

COPY webcontroller/pyproject.toml webcontroller/poetry.lock ./
RUN poetry install --no-root --no-dev

COPY webcontroller ./
RUN poetry install --no-dev

RUN pip install rq

CMD ["python3", "webcontroller/workers/extract.py"]