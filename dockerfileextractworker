FROM python:3.9

RUN pip install poetry
ADD webcontroller /app 

COPY webcontroller/pyproject.toml webcontroller/poetry.lock ./
RUN poetry install --no-root --no-dev

COPY webcontroller ./
RUN poetry install --no-dev

RUN pip install rq

#CMD ["poetry", "run", "python3", "extract.py"]
CMD ["rq", "worker", "--url", "redis://redis:6379", "Extraction"]