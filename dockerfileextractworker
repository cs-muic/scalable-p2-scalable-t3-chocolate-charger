FROM python:3.9

RUN pip install poetry
WORKDIR /app

COPY workers/pyproject.toml workers/poetry.lock ./
RUN poetry install --no-root --no-dev

COPY workers ./
RUN poetry install --no-dev

RUN pip install rq

CMD ["python3", "extract.py"]