FROM ubuntu:18.04


#install ffmpeg on our ubuntu
WORKDIR /app
ENV DEBIAN_FRONTEND=noninteractive
RUN apt-get update && apt-get install -y ffmpeg

#also install imagemagick
RUN apt install imagemagick -y
<<<<<<< HEAD

=======
>>>>>>> 10190a8798d9c2c9d6c41f4c8fb74924112cf17e

FROM python:3.9

RUN pip install poetry
<<<<<<< HEAD

WORKDIR /app
=======
ADD webcontroller /app 
>>>>>>> 10190a8798d9c2c9d6c41f4c8fb74924112cf17e

COPY webcontroller/pyproject.toml webcontroller/poetry.lock ./
RUN poetry install --no-root --no-dev

COPY webcontroller ./
RUN poetry install --no-dev

RUN pip install rq

CMD ["poetry", "run", "python3", "compose.py"]